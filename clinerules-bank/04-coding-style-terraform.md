# Terraformコーディングガイドライン

## 一般原則

- HashiCorp Configuration Language (HCL) の規約に従う
- 宣言型の書き方を心がける
- リソースの依存関係を明確にする
- 環境ごとの設定を分離する
- モジュール化により再利用性を高める

## コーディング規約

### リソース命名

- `snake_case`（スネークケース）を使用
- プリフィックスに環境やプロジェクト名を含める
- 省略せず、わかりやすい名前を使用
- リソース名にはリソースタイプを繰り返さない

### 変数定義

- 変数は`variables.tf`に定義
- `description`、`type`を必ず指定
- 必要に応じて`default`値を設定
- 環境固有の値のみを変数化（ハードコーディング可能なものは`data`ブロックを使用）

## モジュール化

### モジュール設計原則

- 責任範囲を明確に分離（フロントエンド、バックエンド、ネットワーク等）
- 共有モジュールには`provider`ブロックを定義しない
- ルートモジュールで`required_providers`を定義
- モジュール間の依存関係は`outputs`を使用して管理

## 条件分岐とループ

- 条件付きリソース作成には`count`を使用
- リソースの繰り返し作成には`for_each`を使用
- 複雑な条件は別の変数で事前に計算

## タグ管理

- 全リソースに共通タグを適用
- `default_tags`機能を活用
- リソース固有のタグも適切に設定
- タグはパスカルケースを使用

## セキュリティ

### 機密情報管理

- `.tfvars`ファイルはGitにコミットしない
- 機密情報は`TF_VAR_*`環境変数を使用
- 出力値に機密情報が含まれる場合は`sensitive = true`を設定
- AWS Secrets ManagerやHashiCorp Vaultを活用
